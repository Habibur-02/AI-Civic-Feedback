# 🏛️ AI-Powered Civic Feedback Analyzer

A full-featured, open-source Streamlit application for smart government-citizen engagement. Built for HackTheAI 2025, this project merges a robust database backend, advanced AI/NLP-powered suggestions (Google Gemini 2.5 Flash API), and a beautiful, interactive dashboard UI to help authorities and citizens collaborate on civic issues with real, actionable intelligence.

---

## 🚀 Features

- **Role-Based Authentication**
  - Citizens and authorities have dedicated interfaces, permissions, and workflows.
- **AI Categorization & Urgency Scoring**
  - Automatically classifies feedback (Traffic, Sanitation, Safety, Water, Electricity, Infrastructure, Other).
  - Ranks feedback by urgency (High/Medium/Low) using Google Gemini and fallback heuristics.
- **LLM-Generated Guidance**
  - Gemini LLM generates personalized, actionable advice for citizens for every feedback entry.
- **Action Plan Generator**
  - AI proposes detailed, stepwise action plans for authorities based on feedback content and urgency.
- **Intermediate Response Messaging**
  - Authorities can acknowledge feedback and send progress updates to citizens.
- **Interactive Dashboard**
  - Bar/pie charts for category and urgency distribution.
  - Dynamic feedback table with search, filters (category, urgency, date range), and sorting.
- **Analytics & Reporting**
  - Weekly/monthly summary reports generated by AI.
  - Performance metrics: resolution rate, average response time, citizen satisfaction score.
  - Trend analysis and prediction (with AI).
- **Sample Data**
  - Instantly demo-ready with fake users, feedback, guidance, and action plans.
- **Privacy & Compliance**
  - Anonymized dashboard data for public viewing.
  - Data protection: password hashing (with salt), role separation, soft deletes.
- **Code Quality**
  - Modular Python code, well-commented and documented.
  - Easily extensible: swap SQLite for PostgreSQL, customize prompts, add new fields/tables.
- **No Paid APIs Needed**
  - Runs fully locally with fallback logic if Gemini API is not provided.

---

## 🗄️ Database Design

- **Users**:  
  `user_id`, `name`, `role` (citizen/authority), `location`, `email`, `password_hash`, `salt`, `created_at`
- **Feedback**:  
  `feedback_id`, `user_id`, `title`, `text`, `category`, `sentiment`, `urgency`, `priority_score`, `status`, `location_detail`, `timestamp`
- **Guidance** (LLM-generated advice):  
  `guidance_id`, `feedback_id`, `advice_text`, `ai_confidence`, `created_at`
- **ActionPlans** (for authorities):  
  `plan_id`, `feedback_id`, `category`, `recommendation`, `estimated_time`, `required_resources`, `status`, `created_at`
- **IntermediateResponse**:  
  `response_id`, `feedback_id`, `authority_id`, `message_text`, `response_type`, `timestamp`
- **AI_Logs**:  
  `log_id`, `feedback_id`, `operation_type`, `input_data`, `output_data`, `processing_time`, `success`, `error_message`, `timestamp`

---

## 🤖 AI Integration

- **Google Gemini 2.5 Flash API** (free tier):  
  - Categorization, urgency scoring, guidance, action plans, summary reports, trend analysis.
- **Prompt Templates**:  
  - Easily customizable in `ai_processing.py` for hackathon or production.
- **Fallbacks**:  
  - If no API key, rule-based and keyword heuristics ensure 100% local functionality.

---

## 📊 Dashboard UI

- **Charts**:  
  - Feedback by category (pie/bar), urgency (bar), resolution status.
- **Feedback Table**:  
  - View all feedback, guidance, action plan, status, and intermediate response.
  - Filters: category, urgency, date range, search.
- **Add Feedback**:  
  - Citizens can submit new issues; AI processes all steps automatically.
- **Authority Panel**:  
  - Respond, update status, send intermediate responses, see AI recommendations.
- **Public Dashboard**:  
  - Anonymized, real-time metrics and trends for transparency.

---

## 🛠️ Installation & Local Run

### 1. Clone the Repo
```bash
git clone https://github.com/your-username/ai-civic-feedback-analyzer.git
cd ai-civic-feedback-analyzer
```

### 2. Install Dependencies
```bash
pip install -r requirements.txt
```

### 3. Add Your Google Gemini API Key (Optional, for full AI features)
- Get a free API key from: https://makersuite.google.com/app/apikey
- Create a `.env` file in the project root:
  ```
  GOOGLE_API_KEY=your_gemini_api_key_here
  ```
- If no API key is provided, the system will use fallback categorization/scoring.

### 4. Run the App
```bash
streamlit run app.py
```

- The app auto-initializes the database and fills it with sample data on first run.

---

## 👥 Demo Accounts

- **Citizen**  
  Email: `ahmed@email.com`  
  Password: `password123`

- **Authority**  
  Email: `nasir@gov.bd`  
  Password: `admin123`

---

## 🗂️ Project Structure

```
.
├── app.py                # Main Streamlit app (dashboard, forms, charts)
├── database.py           # Database setup, CRUD, sample data
├── ai_processing.py      # AI/LLM functions (Gemini API + fallback)
├── requirements.txt      # Python dependencies
├── .env.example          # Environment variables template
```

---

## 💡 Customization

- **Prompts**:  
  - Edit prompt templates in `ai_processing.py` for guidance/action plans to suit your use-case.
- **Backend**:  
  - Swap SQLite for PostgreSQL by editing connection logic in `database.py`.
- **Styling**:  
  - Tweak dashboard colors and layout in `app.py`.
- **Add Features**:  
  - Easily add upvote system, comment threads, chat, advanced analytics, or external integrations.

---

## 🏆 HackTheAI 2025 Ready

- **End-to-End Demo**:  
  - Submit feedback, get AI advice, see action plans and dashboard analytics—all fully functional locally.
- **ER Diagram**:  
  - See `database.py` for schema, or use provided Mermaid ER diagram.
- **Activity/Data Flow Diagrams**:  
  - Provided in docs for architecture and workflow clarity.
- **No Paid APIs Required**:  
  - Everything works offline, with optional cloud LLM for extra intelligence.

---

## 📜 License

MIT License

---

## 📞 Contact

- Hackathon support: gucc@green.edu.bd / 01569-104401

---

**Built for HackTheAI 2025 – Open Innovation Theme**

---
